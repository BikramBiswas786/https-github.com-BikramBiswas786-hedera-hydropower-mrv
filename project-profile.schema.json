{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Hedera Hydropower Project Profile Schema",
  "description": "Schema for validating hydropower project configuration",
  "type": "object",
  "required": [
    "projectId",
    "projectName",
    "deviceId",
    "deviceName",
    "gridEmissionFactor",
    "executionMode",
    "autoApproveThreshold",
    "manualReviewThreshold"
  ],
  "properties": {
    "projectId": {
      "type": "string",
      "description": "Unique project identifier",
      "pattern": "^[A-Z0-9-]+$",
      "minLength": 5,
      "maxLength": 50,
      "examples": ["HYDROPOWER-DEMO-001", "TURBINE-INDIA-2026"]
    },
    "projectName": {
      "type": "string",
      "description": "Human-readable project name",
      "minLength": 5,
      "maxLength": 100,
      "examples": ["Demo Hydropower Project", "Himalayan Turbine Site"]
    },
    "projectLocation": {
      "type": "string",
      "description": "Geographic location of project",
      "examples": ["Himachal Pradesh, India", "Uttarakhand, India"]
    },
    "operatorName": {
      "type": "string",
      "description": "Name of project operator",
      "minLength": 3,
      "maxLength": 100
    },
    "operatorEmail": {
      "type": "string",
      "description": "Email of project operator",
      "format": "email"
    },
    "deviceId": {
      "type": "string",
      "description": "Unique device identifier",
      "pattern": "^TURBINE-[0-9]+$",
      "examples": ["TURBINE-1", "TURBINE-101"]
    },
    "deviceName": {
      "type": "string",
      "description": "Human-readable device name",
      "minLength": 3,
      "maxLength": 100,
      "examples": ["Main Turbine", "Backup Generator"]
    },
    "deviceType": {
      "type": "string",
      "description": "Type of hydropower turbine",
      "enum": ["pelton", "turgo", "crossflow", "turgo-pelton", "other"],
      "examples": ["pelton", "turgo"]
    },
    "deviceCapacityKw": {
      "type": "number",
      "description": "Rated capacity in kilowatts",
      "minimum": 1,
      "maximum": 10000,
      "examples": [100, 500, 1000]
    },
    "gridEmissionFactor": {
      "type": "number",
      "description": "Grid emission factor in tCO2/MWh",
      "minimum": 0.1,
      "maximum": 2.0,
      "examples": [0.8, 0.7, 1.2]
    },
    "baselineCapacityFactor": {
      "type": "number",
      "description": "Baseline capacity factor (0-1)",
      "minimum": 0.0,
      "maximum": 1.0,
      "examples": [0.5, 0.65, 0.75]
    },
    "executionMode": {
      "type": "string",
      "description": "How data is anchored to blockchain",
      "enum": [
        "transparent-classic",
        "merkle-daily",
        "merkle-weekly",
        "merkle-monthly"
      ],
      "examples": ["transparent-classic", "merkle-daily"]
    },
    "autoApproveThreshold": {
      "type": "number",
      "description": "Trust score threshold for automatic approval (0-1)",
      "minimum": 0.7,
      "maximum": 0.99,
      "examples": [0.90, 0.95]
    },
    "manualReviewThreshold": {
      "type": "number",
      "description": "Trust score threshold for manual review (0-1)",
      "minimum": 0.5,
      "maximum": 0.85,
      "examples": [0.70, 0.80]
    },
    "siteConfig": {
      "type": "object",
      "description": "Site-specific configuration",
      "properties": {
        "flowRateBounds": {
          "type": "object",
          "description": "Valid flow rate range in mÂ³/s",
          "properties": {
            "min": {
              "type": "number",
              "minimum": 0.01,
              "examples": [0.1, 0.5]
            },
            "max": {
              "type": "number",
              "minimum": 0.01,
              "examples": [100, 500]
            }
          },
          "required": ["min", "max"]
        },
        "headBounds": {
          "type": "object",
          "description": "Valid head range in meters",
          "properties": {
            "min": {
              "type": "number",
              "minimum": 1,
              "examples": [10, 20]
            },
            "max": {
              "type": "number",
              "minimum": 1,
              "examples": [500, 1000]
            }
          },
          "required": ["min", "max"]
        },
        "environmentalBounds": {
          "type": "object",
          "description": "Valid environmental parameter ranges",
          "properties": {
            "ph": {
              "type": "object",
              "properties": {
                "min": { "type": "number", "examples": [6.5] },
                "max": { "type": "number", "examples": [8.5] }
              }
            },
            "turbidity": {
              "type": "object",
              "properties": {
                "min": { "type": "number", "examples": [0] },
                "max": { "type": "number", "examples": [100] }
              }
            },
            "temperature": {
              "type": "object",
              "properties": {
                "min": { "type": "number", "examples": [0] },
                "max": { "type": "number", "examples": [40] }
              }
            }
          }
        }
      }
    },
    "verificationConfig": {
      "type": "object",
      "description": "Verification and attestation configuration",
      "properties": {
        "verifierType": {
          "type": "string",
          "description": "Type of verifier",
          "enum": ["human-only", "ai-assisted", "ai-primary"],
          "examples": ["ai-assisted"]
        },
        "verifierAddress": {
          "type": "string",
          "description": "Hedera account ID of verifier",
          "pattern": "^0\\.0\\.[0-9]+$",
          "examples": ["0.0.1234567"]
        },
        "royaltyPercentage": {
          "type": "number",
          "description": "Royalty percentage for platform (0-1)",
          "minimum": 0,
          "maximum": 0.5,
          "examples": [0.20, 0.10]
        },
        "recIssuanceRatio": {
          "type": "number",
          "description": "REC issuance ratio (conservative to aggressive)",
          "minimum": 0.8,
          "maximum": 1.2,
          "examples": [0.9, 1.0, 1.1]
        }
      }
    },
    "hederaConfig": {
      "type": "object",
      "description": "Hedera network configuration",
      "properties": {
        "network": {
          "type": "string",
          "description": "Hedera network",
          "enum": ["testnet", "mainnet"],
          "examples": ["testnet"]
        },
        "operatorAccountId": {
          "type": "string",
          "description": "Operator account ID",
          "pattern": "^0\\.0\\.[0-9]+$",
          "examples": ["0.0.6255927"]
        },
        "didTopicId": {
          "type": "string",
          "description": "HCS topic for DIDs",
          "pattern": "^0\\.0\\.[0-9]+$",
          "examples": ["0.0.7462776"]
        },
        "auditTopicId": {
          "type": "string",
          "description": "HCS topic for audit trail",
          "pattern": "^0\\.0\\.[0-9]+$",
          "examples": ["0.0.7462600"]
        },
        "recTokenId": {
          "type": "string",
          "description": "HTS token ID for RECs",
          "pattern": "^0\\.0\\.[0-9]+$",
          "examples": ["0.0.7462931"]
        }
      }
    },
    "monitoringConfig": {
      "type": "object",
      "description": "Monitoring and reporting configuration",
      "properties": {
        "telemetryInterval": {
          "type": "string",
          "description": "Telemetry submission interval",
          "enum": ["hourly", "daily", "weekly"],
          "examples": ["hourly"]
        },
        "reportingFrequency": {
          "type": "string",
          "description": "Monitoring report frequency",
          "enum": ["daily", "weekly", "monthly"],
          "examples": ["monthly"]
        },
        "dataRetentionDays": {
          "type": "integer",
          "description": "How long to retain data",
          "minimum": 30,
          "maximum": 3650,
          "examples": [365, 730]
        }
      }
    },
    "acm0002Config": {
      "type": "object",
      "description": "ACM0002 methodology configuration",
      "properties": {
        "projectScope": {
          "type": "string",
          "description": "Project scope per ACM0002",
          "enum": ["grid-connected-hydropower", "off-grid-hydropower"],
          "examples": ["grid-connected-hydropower"]
        },
        "leakageModel": {
          "type": "string",
          "description": "Leakage calculation model",
          "enum": ["conservative", "default", "aggressive"],
          "examples": ["conservative"]
        },
        "baselineStudyDate": {
          "type": "string",
          "description": "Date of baseline study",
          "format": "date",
          "examples": ["2026-01-01"]
        },
        "additionalityProofDate": {
          "type": "string",
          "description": "Date of additionality proof",
          "format": "date",
          "examples": ["2026-01-01"]
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata",
      "properties": {
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "version": {
          "type": "string",
          "examples": ["1.0.0"]
        },
        "status": {
          "type": "string",
          "enum": ["draft", "active", "archived"],
          "examples": ["active"]
        }
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "projectId": "HYDROPOWER-DEMO-001",
      "projectName": "Demo Hydropower Project",
      "projectLocation": "Himachal Pradesh, India",
      "operatorName": "Demo Operator",
      "operatorEmail": "operator@example.com",
      "deviceId": "TURBINE-1",
      "deviceName": "Main Turbine",
      "deviceType": "pelton",
      "deviceCapacityKw": 100,
      "gridEmissionFactor": 0.8,
      "baselineCapacityFactor": 0.5,
      "executionMode": "transparent-classic",
      "autoApproveThreshold": 0.90,
      "manualReviewThreshold": 0.70,
      "siteConfig": {
        "flowRateBounds": { "min": 0.1, "max": 100 },
        "headBounds": { "min": 10, "max": 500 },
        "environmentalBounds": {
          "ph": { "min": 6.5, "max": 8.5 },
          "turbidity": { "min": 0, "max": 100 },
          "temperature": { "min": 0, "max": 40 }
        }
      },
      "verificationConfig": {
        "verifierType": "ai-assisted",
        "verifierAddress": "0.0.1234567",
        "royaltyPercentage": 0.20,
        "recIssuanceRatio": 1.0
      },
      "hederaConfig": {
        "network": "testnet",
        "operatorAccountId": "0.0.6255927",
        "didTopicId": "0.0.7462776",
        "auditTopicId": "0.0.7462600",
        "recTokenId": "0.0.7462931"
      },
      "monitoringConfig": {
        "telemetryInterval": "hourly",
        "reportingFrequency": "monthly",
        "dataRetentionDays": 365
      },
      "acm0002Config": {
        "projectScope": "grid-connected-hydropower",
        "leakageModel": "conservative",
        "baselineStudyDate": "2026-01-01",
        "additionalityProofDate": "2026-01-01"
      }
    }
  ]
}
