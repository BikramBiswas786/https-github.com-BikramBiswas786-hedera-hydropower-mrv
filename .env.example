# ═════════════════════════════════════════════════════════════════
# Hedera Hydropower MRV - Production Environment (On-Chain Mode)
# ═════════════════════════════════════════════════════════════════
# Copy this file to .env and fill in real values
# WARNING: Never commit .env to git!

# ─────────────────────────────────────────────────────────────────
# Application
# ─────────────────────────────────────────────────────────────────
NODE_ENV=production
PORT=3000

# ─────────────────────────────────────────────────────────────────
# Hedera Network Configuration
# ─────────────────────────────────────────────────────────────────
# Get testnet account from: https://portal.hedera.com/
# For mainnet, use: https://portal.hedera.com/ (requires KYC)
HEDERA_NETWORK=testnet  # or 'mainnet'

# Operator Account (your primary account for signing transactions)
HEDERA_OPERATOR_ID=0.0.XXXXX
HEDERA_OPERATOR_KEY=302e020100300506032b6570042204...

# Legacy aliases (for backward compatibility)
HEDERA_ACCOUNT_ID=0.0.XXXXX
HEDERA_PRIVATE_KEY=302e020100300506032b6570042204...

# ─────────────────────────────────────────────────────────────────
# On-Chain Resources (HCS Topics & HTS Tokens)
# ─────────────────────────────────────────────────────────────────
# Create these with: node scripts/create-remaining-resources.js

# HCS Topic IDs (Hedera Consensus Service)
AUDIT_TOPIC_ID=0.0.XXXXX        # Main audit log (telemetry attestations)
DID_TOPIC_ID=0.0.XXXXX          # Decentralized Identity registry
VERIFY_TOPIC_ID=0.0.XXXXX       # Verification logs (ML + Physics checks)
ML_MODEL_TOPIC_ID=0.0.XXXXX     # ML model hash publishing (optional)

# HTS Token IDs (Hedera Token Service)
CARBON_TOKEN_ID=0.0.XXXXX       # Fungible carbon credit token (tCO2)
REC_TOKEN_ID=0.0.XXXXX          # Non-fungible REC NFTs (MWh certificates)

# Legacy topic ID (if you have an existing topic)
HEDERA_TOPIC_ID=0.0.XXXXX
HEDERA_TOKEN_ID=0.0.XXXXX

# ─────────────────────────────────────────────────────────────────
# Feature Flags
# ─────────────────────────────────────────────────────────────────
# Enable real Hedera transactions (set to 'false' for mock mode)
USE_REAL_HEDERA=true

# Enable verbose logging for debugging
VERBOSE_TESTS=false

# ─────────────────────────────────────────────────────────────────
# Database
# ─────────────────────────────────────────────────────────────────
# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/hedera_mrv

# Redis for caching and rate limiting
REDIS_URL=redis://localhost:6379

# ─────────────────────────────────────────────────────────────────
# Security
# ─────────────────────────────────────────────────────────────────
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-256-bit-secret-key-here
JWT_EXPIRES_IN=7d

# API Key for device authentication
API_KEY_SALT=your-random-salt-here

# ─────────────────────────────────────────────────────────────────
# Carbon Credits Configuration
# ─────────────────────────────────────────────────────────────────
# Grid emission factor (tCO2/MWh) - India average
EF_GRID=0.82

# Carbon marketplace API keys (optional)
VERRA_API_KEY=your-verra-api-key
GOLD_STANDARD_API_KEY=your-gold-standard-key

# ─────────────────────────────────────────────────────────────────
# Monitoring & Alerting
# ─────────────────────────────────────────────────────────────────
# Slack webhook for alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Email alerts (SMTP configuration)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
ALERT_EMAIL=alerts@yourcompany.com

# Sentry for error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ─────────────────────────────────────────────────────────────────
# ML Configuration
# ─────────────────────────────────────────────────────────────────
# Model drift detection threshold (p-value)
ML_DRIFT_THRESHOLD=0.05

# Auto-retrain when drift detected
ML_AUTO_RETRAIN=true

# Minimum samples for retraining
ML_RETRAIN_MIN_SAMPLES=1000

# ─────────────────────────────────────────────────────────────────
# Rate Limiting
# ─────────────────────────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100   # per window per IP

# ─────────────────────────────────────────────────────────────────
# CORS (Cross-Origin Resource Sharing)
# ─────────────────────────────────────────────────────────────────
CORS_ORIGIN=https://yourdashboard.com,https://yourinvestordashboard.com

# ─────────────────────────────────────────────────────────────────
# Localization
# ─────────────────────────────────────────────────────────────────
DEFAULT_LANGUAGE=en  # en, hi, ta, te
DEFAULT_TIMEZONE=Asia/Kolkata
DEFAULT_CURRENCY=INR

# ─────────────────────────────────────────────────────────────────
# CI/CD Configuration
# ─────────────────────────────────────────────────────────────────
# For GitHub Actions - set to 'true' to skip real network calls in CI
CI=false
